"use strict";var woostifyFormData=function(e){for(var t=[],a=0,n=e.elements.length;a<n;a++){var o=e.elements[a];o.name&&!o.disabled&&"reset"!==o.type&&(t[t.length]={name:o.name,value:o.value})}return t};function woostifyAjaxSingleAddToCartButton(){var e=document.querySelectorAll(".single_add_to_cart_button");e.length&&e.forEach((function(e){var t=e.closest("form.cart"),a=t.classList.contains("variations_form"),n=t.querySelector('[name="add-to-cart"]'),o=!!n&&n.value,r=t.querySelector(".qty"),i=!1,c={};if(a)var s=t.querySelector('[name="product_id"]'),l=t.querySelector('[name="variation_id"]'),d=t.querySelectorAll('select[name^="attribute"]');!o||t.classList.contains("grouped_form")||t.classList.contains("mnm_form")||t.classList.contains("bundle_form")||(e.onclick=function(n){n.preventDefault();var u=!0,f=e.classList.contains("disabled"),_=r?Number(r.value||0):0;if(a&&(o=s.value,i=l.value,d.forEach((function(e){var t=encodeURIComponent(e.name),a=encodeURIComponent(e.value);a?c[t]=a:u=!1}))),!f&&u){var m={};if(t.querySelector('[name="wcgwp_action"]')){var v=t.querySelector('[name="wcgwp_single_product"]:checked'),y=t.querySelector('[name="wcgwp_single_product_note"]');v&&(m.gift_product_id=v.value),y&&(m.gift_product_note=y.value.trim())}var g=document.querySelector(".cart-sidebar-content"),p=document.querySelectorAll(".shop-cart-count");if(r.classList.contains("ajax-ready")){e.classList.add("loading"),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof cartSidebarOpen&&cartSidebarOpen(),"function"==typeof closeAll&&closeAll();var S={action:"single_add_to_cart",ajax_nonce:woostify_ajax_single_add_to_cart_data.ajax_nonce,product_id:o,product_qty:_,variation_id:i,variations:JSON.stringify(c),gift_wrap_data:JSON.stringify(m)};S=new URLSearchParams(S).toString();var w=new Request(woostify_ajax_single_add_to_cart_data.ajax_url,{method:"POST",body:S,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(w).then((function(e){if(200!==e.status)throw alert(woostify_ajax_single_add_to_cart_data.ajax_error),console.log("Status Code: "+e.status),e;return e.json()})).then((function(t){if(t.success){var a=t.data;if(a.mess)alert(a.mess);else{if(p.length)for(var n=0,o=p.length;n<o;n++)p[n].innerHTML=a.item;if(g&&(g.innerHTML=a.content),e.classList.contains("woostify-buy-now")){var r=e.getAttribute("data-checkout_url");window.location=r}var i=document.querySelector(".woostify-total-price"),c=document.querySelector(".bm-cart-total-price .amount");i&&(i.innerHTML=a.total),c&&(c.innerHTML=a.total)}}})).catch((function(e){console.log(e)})).finally((function(){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),e.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open"),jQuery(document.body).trigger("added_to_cart")}))}}})}))}document.addEventListener("DOMContentLoaded",(function(){woostifyAjaxSingleAddToCartButton()}));