"use strict";function productVariation(e,t){var o=document.querySelector(e),r=t||"form.variations_form";if(o&&jQuery(r).length){var i=o.querySelector(".image-item"),a=!!i&&i.querySelector("img"),n=a?a.getAttribute("src"):"",c=a?a.getAttribute("srcset"):"",s=i.querySelector("a"),u=s?s.getAttribute("href"):"",d=o.querySelector(".thumbnail-item"),l=!!d&&d.querySelector("img"),_=l?l.getAttribute("src"):"";if(jQuery(r).length){var m=document.querySelector(".elementor-widget-woostify-product-meta .sku"),f=m?m.innerHTML:"",y=document.querySelector(".wpm_gtin_code_wrapper .wpm_pgw_code");y&&(y.innerHTML=f),jQuery(document.body).on("found_variation",r,(function(t,o){var r=o.image.src,n=o.is_in_stock;if(m&&(m.innerHTML=o.sku),y&&o.wpm_pgw_code&&(y.innerHTML=o.wpm_pgw_code),s&&s.setAttribute("href",o.image.full_src),a){i.classList.add("image-loading");var u=new Image;u.onload=function(){i.classList.remove("image-loading")},u.src=r,a.setAttribute("src",r),c&&a.setAttribute("srcset",o.image.srcset)}l&&l.setAttribute("src",o.image.thumb_src),"function"==typeof easyZoomHandle&&easyZoomHandle();var d=document.querySelector(e),_=!!d&&d.querySelector(".product-images"),f=!!_&&_.querySelector(".woostify-out-of-stock-label"),p=!!_&&_.querySelector(".woostify-tag-on-sale");if(n)o.max_qty&&"function"==typeof woostifyStockQuantityProgressBar&&setTimeout((function(){woostifyStockQuantityProgressBar()}),200),f&&f.remove(),p&&woostify_woocommerce_variable_product_data.sale_tag_percent&&o.display_price!=o.display_regular_price&&(p.innerHTML="-"+Math.round((o.display_regular_price-o.display_price)/o.display_regular_price*100)+"%");else if("undefined"!=typeof woostify_woocommerce_variable_product_data){var g='<span class="woostify-out-of-stock-label position-'+woostify_woocommerce_variable_product_data.out_of_stock_display+" "+woostify_woocommerce_variable_product_data.out_of_stock_square+'">'+woostify_woocommerce_variable_product_data.out_of_stock_text+"</span>";f||_.insertAdjacentHTML("beforeend",g)}})),jQuery(".reset_variations").on("click",(function(e){if(e.preventDefault(),f&&(m.innerHTML=f),y&&(y.innerHTML=f),a){i.classList.add("image-loading");var t=new Image;t.onload=function(){i.classList.remove("image-loading")},t.src=n,a.setAttribute("src",n),c&&a.setAttribute("srcset",c)}_&&l.setAttribute("src",_),u&&s.setAttribute("href",u),"function"==typeof easyZoomHandle&&easyZoomHandle()}))}}}document.addEventListener("DOMContentLoaded",(function(){productVariation(".product-gallery"),"function"==typeof onElementorLoaded&&onElementorLoaded((function(){window.elementorFrontend.hooks.addAction("frontend/element_ready/global",(function(){productVariation(".product-gallery")}))}))}));